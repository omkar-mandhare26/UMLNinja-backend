@startuml classdiagramtest2

actor Retailer
actor Customer
participant "Store System" as SS
participant "Payment System" as PS
participant "Inventory System" as IS

Retailer -> IS: Check stock availability
activate IS
IS --> Retailer: Stock status
deactivate IS

alt Stock is low
    Retailer -> SS: Place order for goods
    activate SS
    SS -> IS: Update inventory
    SS --> Retailer: Order confirmation
    deactivate SS
    
    Retailer -> SS: Receive goods
    activate SS
    SS -> IS: Update stock
    SS --> Retailer: Goods received
    deactivate SS
    
    Retailer -> SS: Arrange goods
    Retailer -> PS: Make payment for order
    activate PS
    PS --> Retailer: Payment confirmation
    deactivate PS
else Stock is available
    Retailer -> SS: Arrange goods for selling
end

Customer -> Retailer: Request to buy goods
activate Retailer
Retailer -> SS: Process sale
activate SS
SS -> IS: Update inventory
SS -> PS: Generate bill
activate PS
PS --> Customer: Present bill
Customer -> PS: Make payment
PS --> Retailer: Payment confirmation
deactivate PS
SS --> Customer: Provide goods
deactivate SS
deactivate Retailer

@enduml